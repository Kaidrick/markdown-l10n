import{g as F,r as b,h as S}from"./index.220b7395.js";var N=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $(t){var r=t.default;if(typeof r=="function"){var a=function(){return r.apply(this,arguments)};a.prototype=r.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var s=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(a,o,s.get?s:{enumerable:!0,get:function(){return t[o]}})}),a}const I={},T=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"})),A=$(T);function x(t){return t.replace(/^\s+|\s+$/g,"")}var p=function(){this.comments=[],this.extractedComments=[],this.headers={},this.headerOrder=[],this.items=[]};p.prototype.save=function(t,r){A.writeFile(t,this.toString(),r)};p.prototype.toString=function(){var t=[];this.comments&&this.comments.forEach(function(s){t.push(("# "+s).trim())}),this.extractedComments&&this.extractedComments.forEach(function(s){t.push(("#. "+s).trim())}),t.push('msgid ""'),t.push('msgstr ""');var r=this,a=[];this.headerOrder.forEach(function(s){s in r.headers&&a.push(s)});var o=Object.keys(this.headers);return o.forEach(function(s){a.indexOf(s)===-1&&a.push(s)}),a.forEach(function(s){t.push('"'+s+": "+r.headers[s]+'\\n"')}),t.push(""),this.items.forEach(function(s){t.push(s.toString()),t.push("")}),t.join(`
`)};p.load=function(t,r){A.readFile(t,"utf-8",function(a,o){if(a)return r(a);var s=p.parse(o);r(null,s)})};p.parse=function(t){t=t.replace(/\r\n/g,`
`);for(var r=new p,a=t.split(/\n\n/),o=[];a[0]&&(o.length===0||o[o.length-1].indexOf('msgid ""')<0);)a[0].match(/msgid\s+"[^"]/)?o.push('msgid ""'):o.push(a.shift());o=o.join(`
`);var s=a.join(`
`).split(/\n/);r.headers={"Project-Id-Version":"","Report-Msgid-Bugs-To":"","POT-Creation-Date":"","PO-Revision-Date":"","Last-Translator":"",Language:"","Language-Team":"","Content-Type":"","Content-Transfer-Encoding":"","Plural-Forms":""},r.headerOrder=[],o.split(/\n/).reduce(function(u,v){return u.merge&&(v=u.pop().slice(0,-1)+v.slice(1),delete u.merge),/^".*"$/.test(v)&&!/^".*\\n"$/.test(v)&&(u.merge=!0),u.push(v),u},[]).forEach(function(u){if(u.match(/^#\./))r.extractedComments.push(u.replace(/^#\.\s*/,""));else if(u.match(/^#/))r.comments.push(u.replace(/^#\s*/,""));else if(u.match(/^"/)){u=u.trim().replace(/^"/,"").replace(/\\n"$/,"");var v=u.split(/:/),y=v.shift().trim(),C=v.join(":").trim();r.headers[y]=C,r.headerOrder.push(y)}});var d=p.parsePluralForms(r.headers["Plural-Forms"]),h=d.nplurals,e=new p.Item({nplurals:h}),n=null,m=0,c=0,f=0;function g(){e.msgid.length>0&&(c>=f&&(e.obsolete=!0),c=0,f=0,r.items.push(e),e=new p.Item({nplurals:h}))}function l(u){return u=x(u),u=u.replace(/^[^"]*"|"$/g,""),u=u.replace(/\\([abtnvfr'"\\?]|([0-7]{3})|x([0-9a-fA-F]{2}))/g,function(v,y,C,P){if(C)return String.fromCharCode(parseInt(C,8));if(P)return String.fromCharCode(parseInt(P,16));switch(y){case"a":return"\x07";case"b":return"\b";case"t":return"	";case"n":return`
`;case"v":return"\v";case"f":return"\f";case"r":return"\r";default:return y}}),u}for(;s.length>0;){var i=x(s.shift()),_=!1;if(i.match(/^#\~/)&&(i=x(i.substring(2)),_=!0),i.match(/^#:/))g(),e.references.push(x(i.replace(/^#:/,"")));else if(i.match(/^#,/)){g();for(var E=x(i.replace(/^#,/,"")).split(","),O=0;O<E.length;O++)e.flags[E[O]]=!0}else if(i.match(/^#($|\s+)/))g(),e.comments.push(x(i.replace(/^#($|\s+)/,"")));else if(i.match(/^#\./))g(),e.extractedComments.push(x(i.replace(/^#\./,"")));else if(i.match(/^msgid_plural/))e.msgid_plural=l(i),n="msgid_plural",f++;else if(i.match(/^msgid/))g(),e.msgid=l(i),n="msgid",f++;else if(i.match(/^msgstr/)){var j=i.match(/^msgstr\[(\d+)\]/);m=j&&j[1]?parseInt(j[1]):0,e.msgstr[m]=l(i),n="msgstr",f++}else i.match(/^msgctxt/)?(g(),e.msgctxt=l(i),n="msgctxt",f++):i.length>0&&(f++,n==="msgstr"?e.msgstr[m]+=l(i):n==="msgid"?e.msgid+=l(i):n==="msgid_plural"?e.msgid_plural+=l(i):n==="msgctxt"&&(e.msgctxt+=l(i)));_&&c++}return g(),r};p.parsePluralForms=function(t){var r=(t||"").split(";").reduce(function(a,o){var s=o.trim(),d=s.indexOf("="),h=s.substring(0,d).trim(),e=s.substring(d+1).trim();return a[h]=e,a},{});return{nplurals:r.nplurals,plural:r.plural}};p.Item=function(t){var r=t&&t.nplurals;this.msgid="",this.msgctxt=null,this.references=[],this.msgid_plural=null,this.msgstr=[],this.comments=[],this.extractedComments=[],this.flags={},this.obsolete=!1;var a=Number(r);this.nplurals=isNaN(a)?2:a};p.Item.prototype.toString=function(){var t=[],r=this,a=function(e){return e=e.replace(/[\x07\b\t\v\f\r"\\]/g,function(n){switch(n){case"\x07":return"\\a";case"\b":return"\\b";case"	":return"\\t";case"\v":return"\\v";case"\f":return"\\f";case"\r":return"\\r";default:return"\\"+n}}),e},o=function(e,n,m){var c=[],f=n.split(/\n/),g=typeof m<"u"?"["+m+"]":"";return f.length>1?(c.push(e+g+' ""'),f.forEach(function(l){c.push('"'+a(l)+'"')})):c.push(e+g+' "'+a(n)+'"'),c},s=function(e,n,m){for(var c=o(e,n,m),f=1;f<c.length-1;f++)c[f]=c[f].slice(0,-1)+'\\n"';return c};this.comments.forEach(function(e){t.push("# "+e)}),this.extractedComments.forEach(function(e){t.push("#. "+e)}),this.references.forEach(function(e){t.push("#: "+e)});var d=Object.keys(this.flags).filter(function(e){return!!this.flags[e]},this);d.length>0&&t.push("#, "+d.join(","));var h=this.obsolete?"#~ ":"";return["msgctxt","msgid","msgid_plural","msgstr"].forEach(function(e){var n=r[e];if(n!=null){var m=!1;if(Array.isArray(n)&&(m=n.some(function(l){return l})),Array.isArray(n)&&n.length>1)n.forEach(function(l,i){var _=s(e,l,i);t=t.concat(h+_.join(`
`+h))});else if(r.msgid_plural&&e==="msgstr"&&!m)for(var c=0;c<r.nplurals;c++)t=t.concat(h+o(e,"",c));else{var f=r.msgid_plural&&Array.isArray(n)?0:void 0;n=Array.isArray(n)?n.join():n;var g=s(e,n,f);t=t.concat(h+g.join(`
`+h))}}}),t.join(`
`)};var w=p;const B=F("app",()=>{const t=b(""),r=b(null),a=b(""),o=b(new w().items),s=b(new w),d=b(null),h=b(null),e=b(0),n=S(()=>e.value*2);function m(){e.value++}return{count:e,doubleCount:n,mainEditor:d,compileEditor:h,startFile:r,editorContent:t,poFileItems:o,poFileMeta:s,compileContent:a,increment:m}});export{N as c,w as p,B as u};
