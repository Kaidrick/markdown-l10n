import{u as E,p as k}from"./app.74cbd21a.js";import{u as A,r as u,o as F,a as i,b as M,c as R,w as a,d as l,e as v,t as $,f as N}from"./index.a0f3d460.js";const I=N("div",{id:"vditor"},null,-1),B={__name:"MainEditor",setup(L){const n=E(),x=A();u(null);const g=u(null),w=u(""),p=u(!1),h=u(!0),V=u(!0),C=u([o=>o?o[0].name.toLowerCase().endsWith(".md")?!0:"File extension is expected to be *.md (Markdown file)":"Please upload a file"]);function P(o){console.log(o,"fileList");const t=o[0];n.startFile=t;const{name:c}=t;if(!c.toLowerCase().endsWith("md"))throw p.value=!0,w.value="Markdown file (*.md) only",new Error("Markdown file only");const r=new FileReader;r.onload=function(f){const e=f.target.result;n.mainEditor.setValue(e)},r.readAsText(t,"UTF-8")}function T(){var c;console.log(n,"store.poFileItems");const o=n.mainEditor.getValue();console.log(o,"data"),n.editorContent=o;const t=((c=n.startFile)==null?void 0:c.name)||`draft-${new Date().valueOf()}`;new Promise((r,f)=>{const e=new k;e.headers["X-Generator"]="Markdown Translation Tool",e.headers["Project-Id-Version"]="",e.headers["Report-Msgid-Bugs-To"]="",e.headers["POT-Creation-Date"]="",e.headers["PO-Revision-Date"]="",e.headers["Last-Translator"]="",e.headers.Language="",e.headers["Language-Team"]="",e.headers["Content-Type"]="",e.headers["Content-Transfer-Encoding"]="",e.headers["Plural-Forms"]="",e.items=o.split(`
`).map((d,_)=>{const s=new k.Item;return s.msgid=d,s.references.push(`${t}:ln ${_+1}`),s}).filter(d=>d.msgid),n.poFileItems=e.items,delete e.items,n.poFileMeta={...e},r()}).then(()=>{x.push({name:"translate"})})}function O(){let t=n.mainEditor.getValue().replaceAll(/(\S)\n([^\n])/mg,"$1 $2");h.value&&(t=t.replaceAll("\u2018","'").replaceAll("\u2019","'").replaceAll("\u201D",'"').replaceAll("\u201C",'"').replaceAll("\uFF0C",", ").replaceAll("\u3002",". ")),n.mainEditor.setValue(t)}return F(()=>{const o=g.value.$el.getBoundingClientRect().height-24;n.mainEditor=new Vditor("vditor",{height:o,toolbarConfig:{pin:!0},cache:{enable:!1},after:()=>{n.mainEditor.setValue(`
# \u5F00\u59CB

\u4F7F\u7528\u4E0A\u9762\u7684\u6587\u4EF6\u4E0A\u4F20\u6765\u8F7D\u5165\u4E00\u4E2AMarkdown\uFF08*.md\uFF09\u6587\u6863\u3002

\u9875\u9762\u4E2D\u90E8\u7684md\u9884\u89C8\u533A\u57DF\u53EF\u4EE5\u67E5\u770B\u4E0A\u4F20\u7684\u5185\u5BB9\uFF0C\u540C\u65F6\u4E5F\u652F\u6301\u7F16\u8F91\u3002

\u70B9\u51FB\u9875\u9762\u5E95\u90E8\u7684\u751F\u6210PO\u6587\u4EF6\u6309\u94AE\u4F1A\u5C06\u5F53\u524Dmd\u7F16\u8F91\u5668\u4E2D\u7684\u5185\u5BB9\u5206\u89E3\u6210PO\u6587\u6863\u6761\u76EE\uFF0C\u6BCF\u4E00\u884C\uFF08\u4E0D\u542B\u7A7A\u884C\uFF0C\u5982\u679C\u5B58\u5728\uFF09\u5BF9\u5E94\u4E00\u6761PO\u3002\u91CD\u590D\u7684\u6761\u76EE\u5C06\u4F1A\u88AB\u5408\u5E76\u3002

PO\u751F\u6210\u540E\uFF0C\u4F1A\u81EA\u52A8\u8DF3\u8F6C\u5230\u7FFB\u8BD1\u9875\u9762\u3002

# \u7FFB\u8BD1

\u7FFB\u8BD1\u9875\u9762\u53EF\u4EE5\u5BF9\u751F\u6210\u7684PO\u8FDB\u884C\u7F16\u8F91\u3002

\u7FFB\u8BD1\u9875\u9762\u9876\u90E8\u540C\u6837\u63D0\u4F9B\u4E86\u4E0A\u4F20\u5165\u53E3\uFF0C\u7528\u4E8E\u8F7D\u5165\u5DF2\u7ECF\u5B58\u5728\u4E8E\u672C\u5730\u7684PO\u3002\u901A\u8FC7\u8FD9\u79CD\u65B9\u5F0F\u53EF\u4EE5\u7EE7\u7EED\u7F16\u8F91\u4E4B\u524D\u672A\u5B8C\u6210\u7684PO\u3002\u7FFB\u8BD1\u9875\u9762\u7684\u529F\u80FD\u7C7B\u4F3C\u4E8E\u7B80\u5316\u7248\u7684poedit\u3002

# \u66FF\u6362

\u7ED3\u5408\u5F00\u59CB\u9875\u8F7D\u5165\u7684md\u6587\u6863\u5185\u5BB9\u548C\u7FFB\u8BD1\u9875\u8F7D\u5165\u7684po\u6587\u4EF6\u5185\u5BB9\uFF0C\u5C1D\u8BD5\u751F\u6210\u4E00\u4EFD\u9010\u884C\u66FF\u6362\u7684\u6700\u7EC8\u7FFB\u8BD1md\u6587\u4EF6\u3002

\u53EF\u4EE5\u5C1D\u8BD5\u76F4\u63A5\u4F7F\u7528\u6B64\u5185\u5BB9\u6765\u751F\u6210\u4E00\u4EFDPO\u6587\u4EF6\u9884\u89C8\uFF0C\u4EE5\u719F\u6089\u5927\u81F4\u7684\u64CD\u4F5C\u6B65\u9AA4\u3002
      `)}})}),(o,t)=>{const c=i("v-file-input"),r=i("v-btn"),f=i("v-snackbar"),e=i("v-card"),d=i("v-col"),_=i("v-checkbox"),s=i("v-row"),b=i("v-main");return M(),R(b,{class:"grow d-flex flex-column flex-nowrap fill-height"},{default:a(()=>[l(s,{class:"shrink flex-0-0"},{default:a(()=>[l(d,{cols:"8"},{default:a(()=>[l(e,{elevation:"2",class:"pa-3"},{default:a(()=>[l(c,{label:"Markdown",placeholder:"Choose a Markdown file here","prepend-icon":"mdi-upload-circle-outline","onUpdate:modelValue":P,rules:C.value},null,8,["rules"]),l(f,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=m=>p.value=m),"multi-line":""},{actions:a(()=>[l(r,{color:"red",variant:"text",onClick:t[0]||(t[0]=m=>p.value=!1)},{default:a(()=>[v(" Close ")]),_:1})]),default:a(()=>[v($(w.value)+" ",1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(d,{cols:"4"},{default:a(()=>[l(e,{elevation:"2",class:"pa-3 fill-height"},{default:a(()=>[l(s,null,{default:a(()=>[l(r,{onClick:O},{default:a(()=>[v("FORMAT")]),_:1}),l(_,{label:"half-width punctuation",modelValue:h.value,"onUpdate:modelValue":t[2]||(t[2]=m=>h.value=m)},null,8,["modelValue"]),l(_,{label:"trim excessive space",modelValue:V.value,"onUpdate:modelValue":t[3]||(t[3]=m=>V.value=m)},null,8,["modelValue"])]),_:1}),l(s,null,{default:a(()=>[l(r,{onClick:T},{default:a(()=>[v("SEND TO TRANSLATION")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(s,{class:"grow"},{default:a(()=>[l(d,{cols:"12"},{default:a(()=>[l(e,{ref_key:"editorWrapper",ref:g,elevation:"2",class:"pa-3 fill-height flex-0-0"},{default:a(()=>[I]),_:1},512)]),_:1})]),_:1})]),_:1})}}};export{B as default};
